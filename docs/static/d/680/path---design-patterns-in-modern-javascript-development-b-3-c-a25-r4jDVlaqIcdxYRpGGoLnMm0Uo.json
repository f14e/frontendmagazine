{"data":{"site":{"siteMetadata":{"title":"Frontend Magazine","author":"Eugene Dzhumak"}},"markdownRemark":{"id":"69dd1985-f688-5091-8c93-a1b3d269a968","excerpt":"Мысли об эффективном взаимодействии в дизайне програмных продуктов. Перевод  Design patterns in modern JavaScript development Паттерны? Дизайн? Мы точно говорим…","html":"<p>Мысли об эффективном взаимодействии в дизайне програмных продуктов.</p>\n<p><em>Перевод <a href=\"https://levelup.gitconnected.com/design-patterns-in-modern-javascript-development-ec84d8be06ca\">Design patterns in modern JavaScript development</a></em></p>\n<h3 id=\"паттерны-дизайн-мы-точно-говорим-о-разработке-определенно\"><a href=\"#%D0%BF%D0%B0%D1%82%D1%82%D0%B5%D1%80%D0%BD%D1%8B-%D0%B4%D0%B8%D0%B7%D0%B0%D0%B9%D0%BD-%D0%BC%D1%8B-%D1%82%D0%BE%D1%87%D0%BD%D0%BE-%D0%B3%D0%BE%D0%B2%D0%BE%D1%80%D0%B8%D0%BC-%D0%BE-%D1%80%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B5-%D0%BE%D0%BF%D1%80%D0%B5%D0%B4%D0%B5%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE\" aria-label=\"паттерны дизайн мы точно говорим о разработке определенно permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Паттерны? Дизайн? Мы точно говорим о разработке? Определенно.</h3>\n<p>В случае объектно-ориентированного программирования, мы, разработчики, патаемся моделировать окружающий нас мир. И поскольку это так, имеет смысл также попробовать использовать окружающий нас мир для описания нашего ремесла.</p>\n<p>В этом случае мы можем обратиться к архитектуре (ту, где есть здания и мосты) и фундаментальной книге, которая называется <strong>Язык Шаблонов: Города, Здания, Кристофера Александра, Сары Исикавы, Миррея Сильверстайна</strong>, где шаблоны описаны следующим образом:</p>\n<blockquote>\n<p>Каждый шаблон описывает проблему, которая появляется снова и снова в нашем окружении, и затем описывает основу решения этой проблемы таким образом, что вы можете использовать это решение миллионы раз, ни разу не повторившись.</p>\n</blockquote>\n<p>В программировании, архитектура - это процесс создания здорового, устройчивого и поддерживаемого приложения, и шаблоны предоставляют способ именования решений для общих задач. Эти решения могут варьироваться от абстрактных/концеплуальных до узконаправленных и технических, и позволяют разработчикам эффективнее общаться друг с другом.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7f05bf84ca539c3a63398814e5668034/f049d/1_pdCoxUhmMHI5tBnGVdnNJQ.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 47.42307692307692%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAJABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAQBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAGp9B4ZMcT/xAAaEAEBAAIDAAAAAAAAAAAAAAACAwABETEz/9oACAEBAAEFAhLVElwtULyGHq3p/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAHBAAAQMFAAAAAAAAAAAAAAAAAQAQEQIxMkGC/9oACAEBAAY/App0oFgswG6b/8QAGRABAAMBAQAAAAAAAAAAAAAAAQAhMRFx/9oACAEBAAE/IUaW7JQIpiQ7tF5s1NfU2n//2gAMAwEAAgADAAAAELgv/8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAEDAQE/EBV//8QAFhEAAwAAAAAAAAAAAAAAAAAAARAh/9oACAECAQE/EDF//8QAHxABAAIBAwUAAAAAAAAAAAAAAQARMSGx8EFRYYHR/9oACAEBAAE/ECFlZCgRPjAKpZoUAuepjSM2pq21pyeJy9E4HtN/uz//2Q=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/7f05bf84ca539c3a63398814e5668034/affe8/1_pdCoxUhmMHI5tBnGVdnNJQ.webp 163w,\n/static/7f05bf84ca539c3a63398814e5668034/11089/1_pdCoxUhmMHI5tBnGVdnNJQ.webp 325w,\n/static/7f05bf84ca539c3a63398814e5668034/d0f2e/1_pdCoxUhmMHI5tBnGVdnNJQ.webp 650w,\n/static/7f05bf84ca539c3a63398814e5668034/326de/1_pdCoxUhmMHI5tBnGVdnNJQ.webp 975w,\n/static/7f05bf84ca539c3a63398814e5668034/64b95/1_pdCoxUhmMHI5tBnGVdnNJQ.webp 1300w,\n/static/7f05bf84ca539c3a63398814e5668034/03b10/1_pdCoxUhmMHI5tBnGVdnNJQ.webp 1950w,\n/static/7f05bf84ca539c3a63398814e5668034/2b3fb/1_pdCoxUhmMHI5tBnGVdnNJQ.webp 2600w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/7f05bf84ca539c3a63398814e5668034/21749/1_pdCoxUhmMHI5tBnGVdnNJQ.jpg 163w,\n/static/7f05bf84ca539c3a63398814e5668034/3950f/1_pdCoxUhmMHI5tBnGVdnNJQ.jpg 325w,\n/static/7f05bf84ca539c3a63398814e5668034/17de2/1_pdCoxUhmMHI5tBnGVdnNJQ.jpg 650w,\n/static/7f05bf84ca539c3a63398814e5668034/029e1/1_pdCoxUhmMHI5tBnGVdnNJQ.jpg 975w,\n/static/7f05bf84ca539c3a63398814e5668034/b1bd1/1_pdCoxUhmMHI5tBnGVdnNJQ.jpg 1300w,\n/static/7f05bf84ca539c3a63398814e5668034/7cbb3/1_pdCoxUhmMHI5tBnGVdnNJQ.jpg 1950w,\n/static/7f05bf84ca539c3a63398814e5668034/f049d/1_pdCoxUhmMHI5tBnGVdnNJQ.jpg 2600w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/7f05bf84ca539c3a63398814e5668034/17de2/1_pdCoxUhmMHI5tBnGVdnNJQ.jpg\"\n          alt=\"Эффективность знания паттернов\"\n          title=\"\"\n          src=\"/static/7f05bf84ca539c3a63398814e5668034/17de2/1_pdCoxUhmMHI5tBnGVdnNJQ.jpg\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Если два и более разработчиков в команде осведомлены о шаблоных, вести разговор о решениях проблем получается очень эффективно. Однако если о шаблонах знает всего один, объяснить их остальной части команды обычно не сложно.</p>\n<p><strong>Цель этой статьи - пробудить ваш аппетит, познакомив вас с идеей шаблонов проектирования и представив паттерны, которые являются интересными потому что используются довольно часто в современных JavaScript проектах.</strong></p>\n<h3 id=\"шаблон-singleton-одиночка\"><a href=\"#%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD-singleton-%D0%BE%D0%B4%D0%B8%D0%BD%D0%BE%D1%87%D0%BA%D0%B0\" aria-label=\"шаблон singleton одиночка permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Шаблон Singleton (одиночка)</h3>\n<p><strong>Что</strong></p>\n<p>Шаблон singleton не является одним из наиболее часто используемых, но мы начинаем с него, потому что его довольно просто понять.</p>\n<p>Шаблон singleton происходит из математического понятия:</p>\n<blockquote>\n<p>В математике singleton - это множество состоящее из одного элемента. Например, множество <code class=\"language-text\">{null}</code> - это singleton.</p>\n</blockquote>\n<p>В программировании это означает что мы просто ограничиваем инициализацию класса единственным объектом. Когда объект класса реализующего шаблон singleton должен быть инициализирован в первый раз, он на самом деле инициализируется. Любая последующая попытка приведет к возврату этого первого инстанса.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/122150d8ce6d3bd662cdc57a1b95166c/9be3e/1_JsnR25Uewd4wZLzZ-a9frg.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 57.42307692307692%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsSAAALEgHS3X78AAABcklEQVQoz21S2W7jMAzs/39dEGyAAEFeCtSxdV+UKNmWOk6zQHeRebDG0gxJkfo4n89/nrhcLrfb7XQ6SSmZOYRARDFGkEx0v9+v1ytk8zxv29ZaG2N87PsOac4QEHQ46L1rIeSyLNP09fmphAjWcik950G0IZ5ztdbDjOXH5pzzzuN3XVcETilprR/zXGDr3VqLKMs8O2OQ52WGDmokXLc1RyYqVGrBeUrlwFERAiGfUEobS7kU5pd5/EXveytrqyvq9iEuUgmlp3lZsFiXEmmfTORYdsrvzLUcRVDOQkpjLb7WOSmV1iaEqJTyPkDBbzNzbr2PWo/+4Zi51CdAvPdSIY40WoO/uv3L3A/zfvAUE/pttBELBqdAYohaWas9U+XyJnNv3MY2xj4oZuicCRqFmxA9pUhWpOL3lkZO9Y2ZK7e1oe3amMfjIaXAdKbHZKxBqVrj8ooyHfdg/sf849+fAPlvHw8Lo3YHvFgE3gX2vwHINHa4ytlCBAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/122150d8ce6d3bd662cdc57a1b95166c/affe8/1_JsnR25Uewd4wZLzZ-a9frg.webp 163w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/11089/1_JsnR25Uewd4wZLzZ-a9frg.webp 325w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/d0f2e/1_JsnR25Uewd4wZLzZ-a9frg.webp 650w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/326de/1_JsnR25Uewd4wZLzZ-a9frg.webp 975w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/64b95/1_JsnR25Uewd4wZLzZ-a9frg.webp 1300w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/03b10/1_JsnR25Uewd4wZLzZ-a9frg.webp 1950w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/2b3fb/1_JsnR25Uewd4wZLzZ-a9frg.webp 2600w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/122150d8ce6d3bd662cdc57a1b95166c/9b672/1_JsnR25Uewd4wZLzZ-a9frg.png 163w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/4b204/1_JsnR25Uewd4wZLzZ-a9frg.png 325w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/e7b61/1_JsnR25Uewd4wZLzZ-a9frg.png 650w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/50a28/1_JsnR25Uewd4wZLzZ-a9frg.png 975w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/67fa2/1_JsnR25Uewd4wZLzZ-a9frg.png 1300w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/c7d2d/1_JsnR25Uewd4wZLzZ-a9frg.png 1950w,\n/static/122150d8ce6d3bd662cdc57a1b95166c/9be3e/1_JsnR25Uewd4wZLzZ-a9frg.png 2600w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/122150d8ce6d3bd662cdc57a1b95166c/e7b61/1_JsnR25Uewd4wZLzZ-a9frg.png\"\n          alt=\"Схема шаблона singleton\"\n          title=\"\"\n          src=\"/static/122150d8ce6d3bd662cdc57a1b95166c/e7b61/1_JsnR25Uewd4wZLzZ-a9frg.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n<em>Кому нужны 2 супергероя, когда есть Бэтмен?</em></p>\n<p><strong>Зачем</strong></p>\n<p>Кроме того что он позволяет нам всегда иметь единственного супергероя (которым всегда, очевидно, будет Бэтмен), зачем нам может понадобиться использовать singleton?</p>\n<p>Хотя singleton - шаблон не без проблем (его прозвали злом, а объекты реализующие его - патологическими лгунами), ему все еще находят применение. Самое очевидное - инстанциирование конфигурационных объектов. Вы скорее всего хотите иметь один экземпяр конфига для всего приложения, если только предоставление множественных конфигураций - это не одна их возможностей вашего приложения.</p>\n<p><strong>Где</strong></p>\n<p>Сервисы в Angular - яркий пример шаблона singleton, исползуемого в большом и популярном фреймворке. В документации Angular есть <a href=\"https://angular.io/guide/singleton-services\">отдельная страница</a> объясняющая как убедиться в том, что сервис всегда предоставляется как singleton</p>\n<p>Сервисы являющиеся одиночками имеют большой смысл, поскольку используются как место для хранения стейта, конфигурации и связи между компонентами, и вы хотите убедиться что несколько экземпляров не привнесут путаницу эти понятия.</p>\n<p>В качестве примера, предположем, у вас есть тривиальное приложение, которое используется для подсчета количества нажатий кнопки.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f58518f066f4d4f341928b147dc78566/d0ce9/1_PZpt4afyPY10CnuRADJx5w.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 47.83180026281209%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsSAAALEgHS3X78AAABPElEQVQoz22SXYuCUBCG/f//I4hAhBLRIkK86CpvzAvBog/WMrQvaf0q3QfP5m67vRfDeWfmnTNn5kimadq2rev6bDYbj8eqqhqGMZ1ONU3DclYUxXGcuq6rqqpfIW02G9/34zg+n89RFEGXy2WSJFGD1Wq1WCwIZVn2Rny5XPb7fZqmt9sNS56gnw1Op1MYhlDE9T9Ij8cjz/O2q/v9XhTFH1o1eCPGS+H8ieIJQQmJWm8hiUu4H0s2zYuGhUdc2Nrf9FssgIs5fTTgqejLsqRtqlDxeDwynev1ymgJ4X8Rw8kOgsDzvLQBjeBhVNRar9eHw2G32223W0qIF/2I4Wx7MBiMRiMWzqHb7aIhNJ/PO50Onn6/P5lM+Av8AjYqtW+gGaGUZZkkKN2Kabmua1nWcDjs9XoUEgtC9QX+WCwzzjYf0wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/f58518f066f4d4f341928b147dc78566/affe8/1_PZpt4afyPY10CnuRADJx5w.webp 163w,\n/static/f58518f066f4d4f341928b147dc78566/11089/1_PZpt4afyPY10CnuRADJx5w.webp 325w,\n/static/f58518f066f4d4f341928b147dc78566/d0f2e/1_PZpt4afyPY10CnuRADJx5w.webp 650w,\n/static/f58518f066f4d4f341928b147dc78566/326de/1_PZpt4afyPY10CnuRADJx5w.webp 975w,\n/static/f58518f066f4d4f341928b147dc78566/64b95/1_PZpt4afyPY10CnuRADJx5w.webp 1300w,\n/static/f58518f066f4d4f341928b147dc78566/03b10/1_PZpt4afyPY10CnuRADJx5w.webp 1950w,\n/static/f58518f066f4d4f341928b147dc78566/a1142/1_PZpt4afyPY10CnuRADJx5w.webp 2283w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/f58518f066f4d4f341928b147dc78566/9b672/1_PZpt4afyPY10CnuRADJx5w.png 163w,\n/static/f58518f066f4d4f341928b147dc78566/4b204/1_PZpt4afyPY10CnuRADJx5w.png 325w,\n/static/f58518f066f4d4f341928b147dc78566/e7b61/1_PZpt4afyPY10CnuRADJx5w.png 650w,\n/static/f58518f066f4d4f341928b147dc78566/50a28/1_PZpt4afyPY10CnuRADJx5w.png 975w,\n/static/f58518f066f4d4f341928b147dc78566/67fa2/1_PZpt4afyPY10CnuRADJx5w.png 1300w,\n/static/f58518f066f4d4f341928b147dc78566/c7d2d/1_PZpt4afyPY10CnuRADJx5w.png 1950w,\n/static/f58518f066f4d4f341928b147dc78566/d0ce9/1_PZpt4afyPY10CnuRADJx5w.png 2283w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/f58518f066f4d4f341928b147dc78566/e7b61/1_PZpt4afyPY10CnuRADJx5w.png\"\n          alt=\"Схема приложения\"\n          title=\"\"\n          src=\"/static/f58518f066f4d4f341928b147dc78566/e7b61/1_PZpt4afyPY10CnuRADJx5w.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Вам нужно хранить количество нажатий на кнопку в одном объекте, который предоставляет:</p>\n<ul>\n<li>фукнционал для подсчета</li>\n<li>текущее количество кликов</li>\n</ul>\n<p>Если бы объект не был синглтоном (и каждая кнопка получит свой собственный экземпляр), подсчет кликов не был бы корректным. Кроме всего прочего, который из экземпляров вы бы передали в компонент, отображающий текущее количество кликов?</p>\n<h3 id=\"шаблон-observer-наблюдатель\"><a href=\"#%D1%88%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD-observer-%D0%BD%D0%B0%D0%B1%D0%BB%D1%8E%D0%B4%D0%B0%D1%82%D0%B5%D0%BB%D1%8C\" aria-label=\"шаблон observer наблюдатель permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Шаблон Observer (наблюдатель)</h3>\n<p><strong>Что</strong></p>\n<p>Шаблон наблюдателя определяется следующим образом:</p>\n<blockquote>\n<p>Шаблон observer - это шаблон проектирования программного обеспечения, в котором объект, называемый субъектом, ведет список зависящих от него объектов,  называемых наблюдателями, и автоматически уведомляет их о любых изменениях состояния, обычно вызывая один из их методов.</p>\n</blockquote>\n<p>Шаблон observer действительно легко понять, если мы попытаемся сравнить его с примером из реально мира - подписками на газеты.</p>\n<p>Обычный сценарий покупки газеты заключается в том, что вы идете к газетному киоску и спрашиваете, вышел ли новый номер вашей любимой газеты. Если нет, то это печально и вам придется идти домой и попробовать снова позже. В терминах JavaScript это будет то же самое что и цикл, исполняющий до тех пор, пока желаемый результат не будет получен.</p>\n<p>Когда вы наконец-то добрались до газеты, вы можете делать то, что вы пларовали сделать с ней все это время - сесть и наслаждаться газетой за чашечкой кофе (или, с точки зрения JavaScript, исполнить колбэк).</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/016937e62b5a65f5faa93ee4212d0977/f049d/1_arrsn5kxG1GRbVpn7tlZkw.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 32.61538461538462%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAHABQDASIAAhEBAxEB/8QAFgABAQEAAAAAAAAAAAAAAAAAAAQD/8QAFQEBAQAAAAAAAAAAAAAAAAAAAQL/2gAMAwEAAhADEAAAAdoSWEJ//8QAGRAAAgMBAAAAAAAAAAAAAAAAAQMAAhES/9oACAEBAAEFAlFfDgLOyf/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABwQAAEDBQAAAAAAAAAAAAAAAAEAAhESITFRof/aAAgBAQAGPwJppudprBAniwv/xAAZEAACAwEAAAAAAAAAAAAAAAABEQAhQYH/2gAIAQEAAT8hABtLUtaCBAhHrs//2gAMAwEAAgADAAAAEP8A3//EABURAQEAAAAAAAAAAAAAAAAAAAEQ/9oACAEDAQE/EGf/xAAVEQEBAAAAAAAAAAAAAAAAAAABEP/aAAgBAgEBPxAn/8QAGRABAQEBAQEAAAAAAAAAAAAAAREhAEFR/9oACAEBAAE/EBFOa3Xv3OzIxlA+TLvN0UKUi9//2Q=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/016937e62b5a65f5faa93ee4212d0977/affe8/1_arrsn5kxG1GRbVpn7tlZkw.webp 163w,\n/static/016937e62b5a65f5faa93ee4212d0977/11089/1_arrsn5kxG1GRbVpn7tlZkw.webp 325w,\n/static/016937e62b5a65f5faa93ee4212d0977/d0f2e/1_arrsn5kxG1GRbVpn7tlZkw.webp 650w,\n/static/016937e62b5a65f5faa93ee4212d0977/326de/1_arrsn5kxG1GRbVpn7tlZkw.webp 975w,\n/static/016937e62b5a65f5faa93ee4212d0977/64b95/1_arrsn5kxG1GRbVpn7tlZkw.webp 1300w,\n/static/016937e62b5a65f5faa93ee4212d0977/03b10/1_arrsn5kxG1GRbVpn7tlZkw.webp 1950w,\n/static/016937e62b5a65f5faa93ee4212d0977/2b3fb/1_arrsn5kxG1GRbVpn7tlZkw.webp 2600w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/016937e62b5a65f5faa93ee4212d0977/21749/1_arrsn5kxG1GRbVpn7tlZkw.jpg 163w,\n/static/016937e62b5a65f5faa93ee4212d0977/3950f/1_arrsn5kxG1GRbVpn7tlZkw.jpg 325w,\n/static/016937e62b5a65f5faa93ee4212d0977/17de2/1_arrsn5kxG1GRbVpn7tlZkw.jpg 650w,\n/static/016937e62b5a65f5faa93ee4212d0977/029e1/1_arrsn5kxG1GRbVpn7tlZkw.jpg 975w,\n/static/016937e62b5a65f5faa93ee4212d0977/b1bd1/1_arrsn5kxG1GRbVpn7tlZkw.jpg 1300w,\n/static/016937e62b5a65f5faa93ee4212d0977/7cbb3/1_arrsn5kxG1GRbVpn7tlZkw.jpg 1950w,\n/static/016937e62b5a65f5faa93ee4212d0977/f049d/1_arrsn5kxG1GRbVpn7tlZkw.jpg 2600w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/jpeg\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/016937e62b5a65f5faa93ee4212d0977/17de2/1_arrsn5kxG1GRbVpn7tlZkw.jpg\"\n          alt=\"Наконец-то\"\n          title=\"\"\n          src=\"/static/016937e62b5a65f5faa93ee4212d0977/17de2/1_arrsn5kxG1GRbVpn7tlZkw.jpg\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    </p>\n<p>Самое разумное что можно сделать (и получать вашу любимую газету ежедневно), это оформить на нее подписку.</p>\n<p>Таким образом, издательсво сообщит вам, когда выйдет новый номер газеты, и доставит его. Больше не нужно бежать в газетный киоск. Никаких разочарований. Блаженство.</p>\n<p>В терминах JavaScript это означает, что вам больше не нужно в цикле опрашивать результат чтобы запустить колбэк.</p>\n<p>Вместо этого вы должны сообщить субъекту, что вы заинтересованы в определенных событиях (сообщениях) и предоставить ему колбэк, который должен быть вызван когда новые данные будут готовы. Теперь вы являетесь наблюдателем.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa223bcb220621a61e615f7624d522bd/2a660/1_Umz-GYQk5skILT07e0Kr4A.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 90.10494752623688%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsSAAALEgHS3X78AAACJ0lEQVQ4y21TXYvqMBDt//8hoiIIooKCig/6KPgkyoIfqGvVVtumaSZp4p406np791CGGGfmzJyZeI1Go9VqNZvNbrc7Go1qtdp0Oq1Wq4vF4vF4aK0f/8IYA3u73Tqdjlev1xGMFDi02+1er4fI2WymCkil3jH5CzhzzkHmIUccx2GB+/0OG0URbr4KrFarJI6VJFhBhEhkhIXPeDz2iOhdEorMsswd4AQrOE+TBEmvlysCNpvN4XAQQgRBMBwOPZw+gz9/AhJ0RIyBiguRJQkD4Ha5XCBTmZmEkETHwyEMAmO0zJCNJOGfHCergpQoG81CIM/V+cvMuRKZ/32MwtDAE4H4RFlz8E8mk2fZpoDtWRC+zXbnX64q16Q0yT+C0zTFjP5jfub6aBtai7wUjFFZtdEGZFwul/v9Hs3gFiXg8ng8nk7f0JalqchytIq8sgDcIBhWw5YNbwjgwpAIJZ3P5+126/s+nO5RxBKRcY4aGXuqjVHZssujIkFK7Pa74Ba4S1IyTYlnHNN2c0YWkGERn6NyG/teko81NjrXLM5vIZNuYnnumG3PfwqmtXG9FXv2kGRHIV9w0gwGA69EhdpQC1K8dxubnjJKkhgBuIdFPLTo9/vlnqELfLabnX86K8uBncs5w3oR+lyv1xgK+MBRqVQ8aOuem3sMPIVkOrzGSZyhWvsJI7iJ7iAku22FRugZL98yv4GU6vWAS0B2u+UF3MDn8/kPKJ36BPr9meoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/fa223bcb220621a61e615f7624d522bd/affe8/1_Umz-GYQk5skILT07e0Kr4A.webp 163w,\n/static/fa223bcb220621a61e615f7624d522bd/11089/1_Umz-GYQk5skILT07e0Kr4A.webp 325w,\n/static/fa223bcb220621a61e615f7624d522bd/d0f2e/1_Umz-GYQk5skILT07e0Kr4A.webp 650w,\n/static/fa223bcb220621a61e615f7624d522bd/326de/1_Umz-GYQk5skILT07e0Kr4A.webp 975w,\n/static/fa223bcb220621a61e615f7624d522bd/64b95/1_Umz-GYQk5skILT07e0Kr4A.webp 1300w,\n/static/fa223bcb220621a61e615f7624d522bd/03b10/1_Umz-GYQk5skILT07e0Kr4A.webp 1950w,\n/static/fa223bcb220621a61e615f7624d522bd/f075a/1_Umz-GYQk5skILT07e0Kr4A.webp 2001w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/fa223bcb220621a61e615f7624d522bd/9b672/1_Umz-GYQk5skILT07e0Kr4A.png 163w,\n/static/fa223bcb220621a61e615f7624d522bd/4b204/1_Umz-GYQk5skILT07e0Kr4A.png 325w,\n/static/fa223bcb220621a61e615f7624d522bd/e7b61/1_Umz-GYQk5skILT07e0Kr4A.png 650w,\n/static/fa223bcb220621a61e615f7624d522bd/50a28/1_Umz-GYQk5skILT07e0Kr4A.png 975w,\n/static/fa223bcb220621a61e615f7624d522bd/67fa2/1_Umz-GYQk5skILT07e0Kr4A.png 1300w,\n/static/fa223bcb220621a61e615f7624d522bd/c7d2d/1_Umz-GYQk5skILT07e0Kr4A.png 1950w,\n/static/fa223bcb220621a61e615f7624d522bd/2a660/1_Umz-GYQk5skILT07e0Kr4A.png 2001w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/fa223bcb220621a61e615f7624d522bd/e7b61/1_Umz-GYQk5skILT07e0Kr4A.png\"\n          alt=\"Схема шаблона наблюдатель\"\n          title=\"\"\n          src=\"/static/fa223bcb220621a61e615f7624d522bd/e7b61/1_Umz-GYQk5skILT07e0Kr4A.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n<em>Никогда больше не пропускайте свою утреннюю газету</em></p>\n<p>Приятно то, что ва не обязательно быть единственным подписчиком. Другие люди тоже будут разочарованы отсутствием газеты, как и вы. Вот почему много наблюдателей могут подписаться на событие.</p>\n<p><strong>Зачем</strong></p>\n<p>Шаблон наблюдателя имеет много вариантов использования, но, как правило, его следует использовать, когда вы хотите создать зависимость один-ко-многим (one-to-many) между объектами, которые не являются тесно связанными и имеют возможность уведомлять неограниченное число объектов об изменении состояния.</p>\n<p>JavaScript - отличное место для шаблона observer, потому что все зависит от событий (event-driven), и вместо того, чтобы постоянно спрашивать, не произошло ли событие, вы должны позволить событию оповестить вас (“Меня никак не зовут, я сам прихожу”).</p>\n<p>Скорее всего, вы уже делали что-то похожее на паттерн observer - <code class=\"language-text\">addEventListener</code>. Добавление слушателя события на элемент имеет все признаки наблюдателя:</p>\n<ul>\n<li>вы можете подписаться на объект</li>\n<li>вы можете отписаться от объекта</li>\n<li>и объект может оповещать о событии всех своих подписчиков</li>\n</ul>\n<p>Большая выгода от изучения этого шаблона в том, что вы сможете реализовать свое собственное решение, или освоить существующее гозадо быстрее.</p>\n<p><strong>Где</strong></p>\n<p>Реализация базового паттерна не должна быть слишком сложной, но есть большая библиотека, используемая многими проектами, и это <a href=\"http://reactivex.io/\">ReactiveX</a>, аналогом которой в JavaScript является <a href=\"https://rxjs.dev/\">RxJS</a>.</p>\n<p>RxJS позволяет вам не только подписываться на события, но также дает вам возможность преобразовывать данные любыми способами, которые вы только можете себе представить, объединяя несколько подписок, делая асинхронную работу более управляемой и много чего еще. Если вы когда-нибудь хотели поднять уровень обработки и преобразования данных на более высокий уровень, RxJS была бы отличной библиотекой для изучения.</p>\n<p>Помимо шаблона observer, ReactiveX также гордится реализацией шаблона iterator, который дает субъектам возможность сообщать своим подписчикам, когда подписка закончилась, эффективно завершая подписку со стороны субъекта. Я не буду объяснять шаблон итератора в этой статье, но для вас было бы очень полезно узнать о нем больше и посмотреть, как он вписывается в паттерн наблюдатель.</p>\n<h3 id=\"паттерн-facade-фасад\"><a href=\"#%D0%BF%D0%B0%D1%82%D1%82%D0%B5%D1%80%D0%BD-facade-%D1%84%D0%B0%D1%81%D0%B0%D0%B4\" aria-label=\"паттерн facade фасад permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Паттерн Facade (фасад)</h3>\n<p><strong>Что</strong></p>\n<p>Фасан - это паттерн, который берет свое название из архитектуры.</p>\n<blockquote>\n<p>Фасад - это, как правило, одна из врешних сторон здания, обычно передняя. Это слово заимствовано из французского «façade», что означает «полисадник» или «лицо».</p>\n</blockquote>\n<p>Поскольку в архитектуре фасад - это внешняя часть здания, прячущая за собой его врутренее устройство, шаблон фасад в разработке програмного обеспечения пытается скрыть за собой лежащую в основе чего-либо сложность, давая вам возможность работать с API, который легче понять, и одновременно позволяя изменять базовый код на ваше усмотрение.</p>\n<p><strong>Зачем</strong></p>\n<p>Вы можете использовать этот паттерн в несметном множестве ситуаций, но наиболее заметными из них будут упрощение понимания вашего кода (скрытие сложности) и создание минимально связанных частей приложений.</p>\n<p>\n  <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a2c56d1671e999c1e74bd621acbaed38/25a5a/1_Unh3rSLKfaMzs3gweZF7UQ.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n  \n  <span\n    class=\"gatsby-resp-image-wrapper\"\n    style=\"position: relative; display: block;  max-width: 650px; margin-left: auto; margin-right: auto;\"\n  >\n    <span\n      class=\"gatsby-resp-image-background-image\"\n      style=\"padding-bottom: 103.23624595469256%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsSAAALEgHS3X78AAACOElEQVQ4y42UW6upYRDHfTjXPoNPsa5d+ASKspQkkWMLJSTlEHGhUCgi5+1MDottWWv/9js7WdZe256Lp3nmnZn/zH/meVUfN/L29hYIBMxmczgcdrlciUTCarWGQiGLxZLP53F4f3+/9VfdXo7H4w9FNpvNbrfjRJ/NZvP5fLVafXyRT8Gvr6+Ao6zXa7/fT8x2ux0OhyQ6HA53sN8Gg/b09GRWRKfT1et17JfL5V/BR0WSySTVFgoFvV6v0WjoeTQanU6nB8EgcxaLxVwul06nYSsejzebTUn6oGwa41wulx6PJxaLabVatVodiUQw7vf7/+25VCoxKrfb/fz8TCLJ+ziYxnCqVqsmk8lgMDgcjk6ncw1GLjfyl2BhLpPJRKNRWrh+eoAMpTgReT6f0UGjC04s9IyREQ4VgX+24FMwuX8qgh9Z2BAKOSkim5PNZqHg5eWFLa5UKvdzxo9IlMViQW42lCvpQMZB9G9HxWfwSdFut2u1Wq/Xww4+G0rGK20iqmvBAggCb4AKQQCWT9PplPqxSzufCMMkrOwVAVOKxy47I0YoEAehU9ZBJSbSgyaRQjj4cAum0C4ZYQEuJNEfZC60B/syLVljro1Gg1ZpWGaG8LxgAUVegYpLt9vt9/uTyaTVavGe0DkJxgKUDHYwGGAHdjweo1Pp72A2yefz8XpSqZTT6bTb7VFFjEYjZzAYtNlsLKnX68WNOfNOMFLC/aiokM/8ukjEnySsSLlcJoyV+PoP+wVa+oVK7+uLbwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n    >\n      <picture>\n        <source\n          srcset=\"/static/a2c56d1671e999c1e74bd621acbaed38/affe8/1_Unh3rSLKfaMzs3gweZF7UQ.webp 163w,\n/static/a2c56d1671e999c1e74bd621acbaed38/11089/1_Unh3rSLKfaMzs3gweZF7UQ.webp 325w,\n/static/a2c56d1671e999c1e74bd621acbaed38/d0f2e/1_Unh3rSLKfaMzs3gweZF7UQ.webp 650w,\n/static/a2c56d1671e999c1e74bd621acbaed38/326de/1_Unh3rSLKfaMzs3gweZF7UQ.webp 975w,\n/static/a2c56d1671e999c1e74bd621acbaed38/64b95/1_Unh3rSLKfaMzs3gweZF7UQ.webp 1300w,\n/static/a2c56d1671e999c1e74bd621acbaed38/acf46/1_Unh3rSLKfaMzs3gweZF7UQ.webp 1854w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/webp\"\n        />\n        <source\n          srcset=\"/static/a2c56d1671e999c1e74bd621acbaed38/9b672/1_Unh3rSLKfaMzs3gweZF7UQ.png 163w,\n/static/a2c56d1671e999c1e74bd621acbaed38/4b204/1_Unh3rSLKfaMzs3gweZF7UQ.png 325w,\n/static/a2c56d1671e999c1e74bd621acbaed38/e7b61/1_Unh3rSLKfaMzs3gweZF7UQ.png 650w,\n/static/a2c56d1671e999c1e74bd621acbaed38/50a28/1_Unh3rSLKfaMzs3gweZF7UQ.png 975w,\n/static/a2c56d1671e999c1e74bd621acbaed38/67fa2/1_Unh3rSLKfaMzs3gweZF7UQ.png 1300w,\n/static/a2c56d1671e999c1e74bd621acbaed38/25a5a/1_Unh3rSLKfaMzs3gweZF7UQ.png 1854w\"\n          sizes=\"(max-width: 650px) 100vw, 650px\"\n          type=\"image/png\"\n        />\n        <img\n          class=\"gatsby-resp-image-image\"\n          style=\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\"\n          src=\"/static/a2c56d1671e999c1e74bd621acbaed38/e7b61/1_Unh3rSLKfaMzs3gweZF7UQ.png\"\n          alt=\"Схема паттерна Фасад\"\n          title=\"\"\n          src=\"/static/a2c56d1671e999c1e74bd621acbaed38/e7b61/1_Unh3rSLKfaMzs3gweZF7UQ.png\"\n        />\n      </picture>\n      </span>\n  </span>\n  \n  </a>\n    \n<em>Fus Ro Dah!</em></p>\n<p>Легко понять, почему фасад (или слой со множеством объектов) будет хорош в этой ситуации. Вы не захотите иметь дело с драконами, если этого можно избежать. Объект фасада предоставит вам хороший API и сам разберется со всеми драконьими выходками.</p>","frontmatter":{"title":"Паттерны проектировани в современном JavaScript","date":"16 апреля 2019","description":"Привет, мир!"},"fields":{"readingTime":{"text":"7 min read"}}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/design-patterns-in-modern-javascript-development/","previous":{"fields":{"slug":"/hello-world/"},"frontmatter":{"title":"Привет, мир!"}},"next":null}}